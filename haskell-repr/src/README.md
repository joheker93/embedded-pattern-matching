This version has the AST witnessed by the representation type of the terms.
